- if article.errors.any?
  h4 ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:
  ul
    - article.errors.full_messages.each do |message|
      li= message

div data-controller="markdown-preview image-upload layout-switcher category-modal" data-markdown-preview-url-value=dashboard_preview_path(locale: params[:locale]) data-layout-switcher-translation-mode-value=is_translation data-category-modal-url-value="#{dashboard_categories_path(format: :json)}" data-category-modal-locale-value="#{article.locale || 'ja'}" class="layout-switcher"

  div data-layout-switcher-target="buttons" class="layout-buttons flex gap-1 justify-center mb-2"
    button.layout-button type="button" data-action="click->layout-switcher#switchToSplit" data-mode="split" âš
    button.layout-button type="button" data-action="click->layout-switcher#switchToTextOnly" data-mode="text-only" â˜°
    button.layout-button type="button" data-action="click->layout-switcher#switchToPreviewOnly" data-mode="preview-only" âš‡
    - if is_translation
      button.layout-button type="button" data-action="click->layout-switcher#switchToOriginalPreview" data-mode="original-preview" åŸ

  div class= "relative flex gap-5 h-screen"
    div data-layout-switcher-target="textArea" class="flex-1 pr-5 flex flex-col h-full text-area"

      = form_with model: article, url: form_url, local: true do |f|

        div class="flex items-baseline mb-6 border-b border-gray-400"

          div class="flex items-baseline gap-4"
            p
              = f.select :locale, options_for_select([["æ—¥æœ¬èª", "ja"], ["English", "en"]], article.locale), {}, { disabled: locale_disabled, class: "text-gray-600 border border-gray-400 rounded" }
            p
              = f.select :status, options_for_select([["ä¸‹æ›¸ã", "draft"],["å…¬é–‹", "published"]], article.status), {}, class: "text-gray-600 border border-gray-400 rounded"

          div class="flex items-baseline gap-1 mx-4"
            - case button_type
            - when "new"
              /= f.submit "è¨˜äº‹ã‚’ä½œæˆ", class: "bg-gray-500 hover:bg-gray-600 rounded text-sm py-1 px-2 text-white"
              = f.submit "è¨˜äº‹ã‚’ä½œæˆ", class: "btn-unified"
            - when "edit"
              /= f.submit "æ›´æ–°", class: "bg-blue-500 hover:bg-blue-600 rounded text-sm py-1 px-2 text-white"
              = f.submit "æ›´æ–°", class: "btn-unified"
              /= link_to "ã‚­ãƒ£ãƒ³ã‚»ãƒ«", dashboard_articles_path, class: "bg-gray-500 hover:bg-gray-600 rounded text-sm py-1 px-2 text-white ml-2"
              = link_to "ã‚­ãƒ£ãƒ³ã‚»ãƒ«", dashboard_articles_path, class: "btn-unified ml-2"
              /= link_to "å‰Šé™¤", dashboard_article_path(article), class: "bg-red-500 hover:bg-red-600 rounded text-sm py-1 px-2 text-white ml-2", data: { "turbo-method": "delete", "turbo-confirm": "æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ" }
              = link_to "å‰Šé™¤", dashboard_article_path(article), class: "btn-unified ml-2", data: { "turbo-method": "delete", "turbo-confirm": "æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ" }
            - when "translation"
              /= f.submit "ç¿»è¨³ã‚’ä½œæˆ", class: "bg-green-500 hover:bg-green-600 rounded text-sm py-1 px-2 text-white"
              = f.submit "ç¿»è¨³ã‚’ä½œæˆ", class: "btn-unified"
              /= link_to "ã‚­ãƒ£ãƒ³ã‚»ãƒ«", dashboard_article_path(original_article), class: "bg-gray-500 hover:bg-gray-600 rounded text-sm py-1 px-2 text-white ml-2"
              = link_to "ã‚­ãƒ£ãƒ³ã‚»ãƒ«", dashboard_article_path(original_article), class: "btn-unified ml-2"
        div class="ml-auto flex gap-2 border-b border-gray-400"
          .flex.items-center.gap-1
            button.text-gray-500.hover:text-gray-700.text-lg.font-bold type="button" data-action="click->category-modal#showModal" title="æ–°ã—ã„ã‚«ãƒ†ã‚´ãƒªã‚’è¿½åŠ " +
            = f.select :category_id, options_from_collection_for_select(@categories, :id, :name, article.category_id), { prompt: "---" }, { class: "text-gray-400 focus:outline-none", required: false, data: { category_modal_target: "select" } }
          p
            = f.text_field :tag_list, placeholder: "tags", class: "text-gray-600 focus:outline-none"
          p
            /button type="button" data-action="click->image-upload#selectImage" style="cursor-pointer margin-bottom: 10px"
            button type="button" data-action="click->image-upload#selectImage" class="cursor-pointer mb-2"
              | ğŸ“·
        p
          = f.text_field :title, required: true,
            class: "w-full border-b border-gray-400 placeholder-gray-400 p-2 focus:border-gray-400 focus:outline-none mb-3",
            placeholder: "title",
            data: { field: "title", action: "input->markdown-preview#preview" }
            
          = f.text_area :content, required: true, style: "width: 100%; padding-bottom: 36rem;", data: { markdown_preview_target: "input", action: "input->markdown-preview#preview", image_upload_target: "textarea" }, class: "px-3 py-2 border-0 focus:ring-0 focus:outline-none focus:border-[1px] focus:border-gray-300"

    .fixed.inset-0.bg-black.bg-opacity-50.flex.items-center.justify-center.z-50.hidden data-category-modal-target="modal"
      .bg-white.rounded-lg.p-6.w-96.max-w-90vw
        h3.text-lg.font-semibold.mb-4 æ–°ã—ã„ã‚«ãƒ†ã‚´ãƒªã‚’ä½œæˆ

        form data-category-modal-target="form" data-action="submit->category-modal#submitForm"
          .mb-4
            label.block.text-sm.font-medium.text-gray-700.mb-2 ã‚«ãƒ†ã‚´ãƒªå
            input.w-full.border.border-gray-300.rounded-md.px-3.py-2.focus:outline-none.focus:ring-1.focus:ring-gray-500 type="text" name="category[name]" required="" placeholder="ã‚«ãƒ†ã‚´ãƒªåã‚’å…¥åŠ›"
          .flex.gap-3.justify-end
            button.px-4.py-2.text-gray-600.border.border-gray-300.rounded-md.hover:bg-gray-50 type="button" data-action="click->category-modal#closeModal" ã‚­ãƒ£ãƒ³ã‚»ãƒ«
            button.px-4.py-2.bg-blue-500.text-white.rounded-md.hover:bg-blue-600 type="submit" ä½œæˆ

    div class="absolute top-0 bottom-0 left-1/2 w-[1px] bg-gray-400 layout-divider"

    div data-layout-switcher-target="preview" class="flex-1 pl-5 h-full overflow-hidden hover:overflow-y-auto preview-area"
      .medium-container style="all: revert;"
        div data-markdown-preview-target="titlePreview" class="medium title-preview"
          h1 ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¿ã‚¤ãƒˆãƒ«
        div data-markdown-preview-target="preview" class="medium" style="padding-bottom: 36rem;"
          p ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™

    - if is_translation
      div data-layout-switcher-target="originalPreview" class="flex-1 pl-5 h-full overflow-hidden hover:overflow-y-auto original-preview-area"
        .original-content style="all: revert;"
          div class="medium"
            .original-title
              h1= @original_article.title
            .original-body
              = @original_article.content_html
